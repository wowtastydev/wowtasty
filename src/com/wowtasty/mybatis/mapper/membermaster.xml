<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="membermaster">

	<sql id="columns"> 
		MemberID, Email, Password, FirstName, LastName, Telephone, Address
		, Suite, City, Province, PostalCode, DelivFirstName, DelivLastName, DelivTelephone
		, DelivAddress, DelivSuite, DelivBuzzer, DelivCity, DelivProvince, DelivIntruction
		, Ecash, Status, TotalOrderCnt, NAFlag, UpdateID, UpdateTime
	</sql>
	
	<!--SelectAll-->
	<select id="selectAll" resultType="membermastervo">
	SELECT 
	<include refid="columns"/>
	FROM member_master ORDER BY MemberID
	</select>
	
	<!--selectByEmail-->
	<select id="selectByEmail" parameterType="String" resultType="membermastervo">
	SELECT 
	<include refid="columns"/>
	FROM member_master 
	WHERE Email = #{email}
	</select>
	
	<!--selectMaxID-->
	<select id="selectMaxID" resultType="java.lang.String">
	SELECT LPAD(MAX(MemberID)+1, 10, '0') FROM member_master;
	</select>
	
	<!--Insert-->
	<insert id = "insert" parameterType="membermastervo">
	INSERT INTO member_master
	( 	MemberID,
		Email,
		Password,
		FirstName,
		LastName,
		Telephone,
		Address,
		Suite,
		City,
		Province,
		PostalCode,
		DelivFirstName,
		DelivLastName,
		DelivTelephone,
		DelivAddress,
		DelivSuite,
		DelivBuzzer,
		DelivCity,
		DelivProvince,
		DelivPostalCode,
		DelivIntruction,
		Ecash,
		Status,
		NAFlag,
		UpdateID,
		UpdateTime)
	VALUES
	(	#{memberID},
		#{email},
		#{password},
		#{firstName},
		#{lastName},
		#{telephone},
		#{address},
		#{suite},
		#{city},
		#{province},
		#{postalCode},
		#{delivFirstName},
		#{delivLastName},
		#{delivTelephone},
		#{delivAddress},
		#{delivSuite},
		#{delivBuzzer},
		#{delivCity},
		#{delivProvince},
		#{delivPostalCode},
		#{delivIntruction},
		#{ecash},
		#{status},
		#{naFlag},
		#{updateID},
		now())
	</insert>
	
	<!--Update-->
	<update id = "update" parameterType="membermastervo">
		UPDATE member_master
		SET Email = #{email},
			Password = #{password},
			FirstName = #{firstName},
			LastName = #{lastName},
			Telephone = #{telephone},
			Address = #{address},
			Suite = #{suite},
			City = #{city},
			Province = #{province},
			PostalCode = #{postalCode},
			DelivFirstName = #{delivFirstName},
			DelivLastName = #{delivLastName},
			DelivTelephone = #{delivTelephone},
			DelivAddress = #{delivAddress},
			DelivSuite = #{delivSuite},
			DelivBuzzer = #{delivBuzzer},
			DelivCity = #{delivCity},
			DelivProvince = #{delivProvince},
			DelivIntruction = #{delivIntruction},
			Ecash = #{ecash},
			Status = #{status},
			NAFlag = #{naFlag},
			UpdateID = #{updateID},
			UpdateTime = now() 
		WHERE 
		  	MemberID = #{memberID}

	</update>
</mapper>